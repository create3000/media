<!DOCTYPE html>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>DOM access for X_ITE</title>
		<meta charset="utf-8"/>

		<link rel="stylesheet" href="https://create3000.github.io/code/x_ite/alpha/dist/x_ite.css"/>
		<script src="https://create3000.github.io/code/x_ite/alpha/dist/x_ite.min.js"></script>

	<style>

@import url(https://fonts.googleapis.com/css?family=PT+Sans:400);

html, body {
	margin: 0px;
	padding: 0px;
	border: 0px;
	width: 100%;
	height: 100%;
	overflow: hidden;
}

body {
	background: #414141;
	color: white;
	font-family: PT Sans;
	font-size: 12pt;
}

.browser {
	position: absolute;
	top: 0px;
	right: 0px;
	bottom: 30px;
	left: 0px;
	width: auto;
	height: auto;
}

.button {
	position: absolute;
	height: 30px;
	width: 100%;
	right: 0px;
	bottom: 0px;
	left: 0px;
}

.html {
	position: absolute;
	bottom: 30px;
	left: 0px;
	font-size: 24pt;
	color: black;
	/* xOffset yOffset blur color */
	text-shadow: 0px 0px 3px white;
}

.html p {
	margin: 20px 30px;
}
	</style>
   </head>
	<body>
		<x3d-canvas class="browser" timings="false">
			<img class="fallback" src="XHTML.png"/>
			<X3D xmlns="http://www.web3d.org/specifications/x3d-namespace" id="spheres">
 				<Scene DEF='scene'>
					<Viewpoint position='16.0328 13.056 34.2417' orientation='-0.624839 0.780206 0.0292506 0.543473' />
    				<Background skyColor='1 1 1'/>

					<Transform scale='2.5 2.5 2.5'>
						<Shape DEF='CUBE1'>
 							<Appearance>
								<Material specularColor='.2 .2 .2' />
								<ImageTexture url='"textures/x3d_256.jpg"'/>
							</Appearance>
							<Box/>
						</Shape>
						<Shape DEF='CUBE2'>
							<Appearance>
								<Material specularColor='.2 .2 .2' />
								<ImageTexture url='"textures/webgl_256.jpg"'/>
							</Appearance>
							<Box/>
						</Shape>
						<Shape DEF='CUBE3'>
							<Appearance>
								<Material specularColor='.2 .2 .2' />
								<ImageTexture url='"textures/w3c_256.jpg"'/>
							</Appearance>
							<Box/>
						</Shape>
						<Shape DEF='CUBE4'>
							<Appearance>
								<Material specularColor='.2 .2 .2' />
								<ImageTexture url='"textures/web3d_256.jpg"'/>
							</Appearance>
							<Box/>
						</Shape>
						<Transform DEF='XFORM0a' center='0 0 10'>
							<Shape USE='CUBE1'/>
						</Transform>
						<Transform DEF='XFORM0b' center='0 7 7'>
							<Shape USE='CUBE2'/>
						</Transform>
						<Transform DEF='XFORM0c' center='10 0 0'>
							<Shape USE='CUBE3'/>
						</Transform>
						<Transform DEF='XFORM0d' center='0 10 0'>
							<Shape USE='CUBE4'/>
						</Transform>
						<Transform DEF='XFORM1a'>
							<Transform USE='XFORM0a'/>
							<Transform USE='XFORM0b'/>
							<Transform USE='XFORM0c'/>
							<Transform USE='XFORM0d'/>
						</Transform>
						<Transform DEF='XFORM1b'>
							<Transform USE='XFORM0a'/>
							<Transform USE='XFORM0b'/>
							<Transform USE='XFORM0c'/>
							<Transform USE='XFORM0d'/>
						</Transform>
						<Transform DEF='XFORM1c'>
							<Transform USE='XFORM0a'/>
							<Transform USE='XFORM0b'/>
							<Transform USE='XFORM0c'/>
							<Transform USE='XFORM0d'/>
						</Transform>
						<Transform DEF='XFORM1d'>
							<Transform USE='XFORM0a'/>
							<Transform USE='XFORM0b'/>
							<Transform USE='XFORM0c'/>
							<Transform USE='XFORM0d'/>
						</Transform>
						<Transform DEF='XFORM2a'>
							<Transform USE='XFORM1a'/>
							<Transform USE='XFORM1b'/>
							<Transform USE='XFORM1c'/>
							<Transform USE='XFORM1d'/>
						</Transform>
						<Transform DEF='XFORM2b'>
							<Transform USE='XFORM1a'/>
							<Transform USE='XFORM1b'/>
							<Transform USE='XFORM1c'/>
							<Transform USE='XFORM1d'/>
						</Transform>
						<Transform DEF='XFORM2c'>
							<Transform USE='XFORM1a'/>
							<Transform USE='XFORM1b'/>
							<Transform USE='XFORM1c'/>
							<Transform USE='XFORM1d'/>
						</Transform>
						<Transform DEF='XFORM2d'>
							<Transform USE='XFORM1a'/>
							<Transform USE='XFORM1b'/>
							<Transform USE='XFORM1c'/>
							<Transform USE='XFORM1d'/>
						</Transform>
					</Transform>
					<Transform DEF='TREE'>
						<Transform USE='XFORM2a'/>
						<Transform USE='XFORM2b'/>
						<Transform USE='XFORM2c'/>
						<Transform USE='XFORM2d'/>
					</Transform>

					<TimeSensor DEF='TIMER' cycleInterval='30' loop='true'/>
					<OrientationInterpolator DEF='ROTOR_A' key='0 0.5 1' keyValue='1 0 0 0, 1 0 0 3.14, 1 0 0 6.28'/>
					<OrientationInterpolator DEF='ROTOR_B' key='0 0.5 1' keyValue='0 1 0 0, 0 1 0 3.14, 0 1 0 6.28'/>
					<OrientationInterpolator DEF='ROTOR_C' key='0 0.5 1' keyValue='0 0 1 0, 0 0 1 3.14, 0 0 1 6.28'/>
					<OrientationInterpolator DEF='ROTOR_D' key='0 0.5 1' keyValue='0.707 0 0.707 0, 0.707 0 0.707 3.14, 0.707 0 0.707 6.28'/>
					<PositionInterpolator DEF='POS_A' key='0 0.5 1' keyValue='0 0 0, 2 0 0, 0 0 0'/>
					<ROUTE fromNode='TIMER' fromField='fraction_changed' toNode='ROTOR_A' toField='set_fraction'/>
					<ROUTE fromNode='TIMER' fromField='fraction_changed' toNode='ROTOR_B' toField='set_fraction'/>
					<ROUTE fromNode='TIMER' fromField='fraction_changed' toNode='ROTOR_C' toField='set_fraction'/>
					<ROUTE fromNode='TIMER' fromField='fraction_changed' toNode='ROTOR_D' toField='set_fraction'/>
					<ROUTE fromNode='ROTOR_A' fromField='value_changed' toNode='XFORM0a' toField='rotation'/>
					<ROUTE fromNode='ROTOR_A' fromField='value_changed' toNode='XFORM1a' toField='rotation'/>
					<ROUTE fromNode='ROTOR_A' fromField='value_changed' toNode='XFORM2a' toField='rotation'/>
					<ROUTE fromNode='ROTOR_B' fromField='value_changed' toNode='XFORM0b' toField='rotation'/>
					<ROUTE fromNode='ROTOR_B' fromField='value_changed' toNode='XFORM1b' toField='rotation'/>
					<ROUTE fromNode='ROTOR_B' fromField='value_changed' toNode='XFORM2b' toField='rotation'/>
					<ROUTE fromNode='ROTOR_C' fromField='value_changed' toNode='XFORM0c' toField='rotation'/>
					<ROUTE fromNode='ROTOR_C' fromField='value_changed' toNode='XFORM1c' toField='rotation'/>
					<ROUTE fromNode='ROTOR_C' fromField='value_changed' toNode='XFORM2c' toField='rotation'/>
					<ROUTE fromNode='ROTOR_D' fromField='value_changed' toNode='XFORM0d' toField='rotation'/>
					<ROUTE fromNode='ROTOR_D' fromField='value_changed' toNode='XFORM1d' toField='rotation'/>
					<ROUTE fromNode='ROTOR_D' fromField='value_changed' toNode='XFORM2d' toField='rotation'/>
				</Scene>
			</X3D>
		</x3d-canvas>

		<div class="html">
			<p>
				XHTML and X_ITE can<br/>
				seamlessly operate together
			</p>
		</div>

		<button id="toggleAnimation" class="button input input-button" onclick="toggleAnimation ()">HTML Button to Toggle Animation</button>

		<script>
const scene = document .querySelector ('Scene');

let routeA, routeB, routeC, routeD;

function toggleAnimation ()
{
	freezeA ();
	freezeB ();
	freezeC ();
	freezeD ();
}

function freezeA ()
{
	const el = document .querySelector ('ROUTE[fromNode="TIMER"][toNode="ROTOR_A"]');

	if (el)
	{
		routeA = el;
		el .remove ();
	}
	else { scene .appendChild (routeA); }
}

function freezeB ()
{
	const el = document .querySelector ('ROUTE[fromNode="TIMER"][toNode="ROTOR_B"]');

	if (el)
	{
		routeB = el;
		el .remove ();
	}
	else { scene .appendChild (routeB); }
}

function freezeC ()
{
	const el = document .querySelector ('ROUTE[fromNode="TIMER"][toNode="ROTOR_C"]');

	if (el)
	{
		routeC = el;
		el .remove ();
	}
	else { scene .appendChild (routeC); }
}

function freezeD ()
{
	const el = document .querySelector ('ROUTE[fromNode="TIMER"][toNode="ROTOR_D"]');

	if (el)
	{
		routeD = el;
		el .remove ();
	}
	else { scene .appendChild (routeD); }
}
		</script>
	</body>
</html>
